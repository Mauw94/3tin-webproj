{% extends "::base.html.twig" %}

{% block title %}AppBundle:Locatie:show{% endblock %}

{% block body %}
    <h1>Probleem meldingen</h1>

    <table class="table table-striped table-middle-aligned">
        <thead>
        <tr>
            <th scope="col">Probleem</th>
            <th scope="col" class="text-center"><i class="fa fa-calendar" aria-hidden="true"></i>Datum</th>
            <th scope="col" class="text-center"><i class="fa fa-check"></i>Afgehandeld</th>
            <th scope="col">Score</th>
            <th scope="col">Beoordeel</th>
            <th scope="col" class="text-center"><i class="fa fa-cogs" aria-hidden="true"></i> Actions</th>
        </tr>
        </thead>
        <tbody>

        {% for probleemMelding in probleemMeldingen %}
            <tr>
                <td>{{ probleemMelding.probleem }}</td>
                <td class="text-center">{{ probleemMelding.datum | date('d/m/Y') }}</td>
                <td class="text-center">
                    {% if probleemMelding.IsAfgehandeld %}
                    <i class="fa fa-check"></i>
                    {% else %}
                    <i></i>
                    {% endif %}
                </td>
                <td class="text-center">
                    {% if probleemMelding.Score%}
                        <i>{{ probleemMelding.Score }}</i>
                    {% else %}
                        <i>Geen score gevonden.</i>
                    {% endif %}
                </td>
                <td class="text-center">
                    {% if probleemMelding.IsAfgehandeld %}
                        <i><input type="number" min="0" max="5" id="input-{{ probleemMelding.id }}">
                            <a href="#" onclick="send(this.id)" class="btn btn-sm btn-default" id="button-{{ probleemMelding.id }}">
                                Beoordeel
                            </a>
                        </i>
                    {% else %}
                        <i>Nog niet beoordeelbaar.</i>
                    {% endif %}
                </td>
                <td class="text-center">
                    <div class="item-actions">
                        <a class="btn btn-sm btn-default">
                            Toekennen Technicus
                        </a>
                    </div>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="4" align="center">Geen probleem meldingen gevonden</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>


    <h1>Status meldingen</h1>

<table class="table table-striped table-middle-aligned">
    <thead>
    <tr>
        <th scope="col">Status</th>
        <th scope="col" class="col-lg-5"><i class="fa fa-calendar" aria-hidden="true"></i>Datum</th>
    </tr>
    </thead>
    <tbody>

    {% for statusMelding in statusMeldingen %}
        <tr>
            <td>{{ statusMelding.status }}</td>
            <td class="col-lg-5">{{ statusMelding.datum | date('d/m/Y') }}</td>
            </td>
        </tr>
    {% else %}
        <tr>
            <td colspan="4" align="center">Geen probleem meldingen gevonden</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
    <script>
        function send(clicked_id) {
            var id = clicked_id.split("-").pop();
            var score = document.getElementById('input-'+id).value;
            document.location.href = '/'+id+'/score/'+score;
            return false;
        }
    </script>
{% endblock %}


